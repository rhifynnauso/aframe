<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Interactions</title>
  <meta name="description" content="Demo of threejs using Web Components">
  <link rel="stylesheet" type="text/css" href="../style/vr-markup.css">
  <link rel="stylesheet" type="text/css" href="style/main.css">
  <script src="../build/vr-markup.js"></script>
  <!-- User-defined components -->
  <script src="../components/vr-cube.js"></script>
  <script src="../components/vr-grid.js"></script>
  <style id="vr-styles">
    body {
      background-color: black;
    }
  </style>
</head>

<body>
  <vr-assets>
    <vr-material id="highlight" color="yellow"></vr-material>
    <vr-material id="normal" color="red"></vr-material>
  </vr-assets>
  <vr-scene>
    <vr-controls></vr-controls>
    <vr-camera position="0 1.8 20">
      <vr-cursor position="0 0 -1" radius="0.005"></vr-cursor>
    </vr-camera>
    <vr-cube position="0 2 -8" material="normal" width="4" height="4" depth="4" href="cube.html"></vr-cube>
    <vr-cube position="6 2 0" material="normal" width="4" height="4" depth="4"></vr-cube>
    <vr-cube position="-6 2 0" material="normal" width="4" height="4" depth="4"></vr-cube>
    <vr-grid size="50"></vr-grid>
  </vr-scene>
  <script>
    var cubes = document.querySelectorAll('vr-cube');
    var i;
    for (i = 0; i < cubes.length; ++i) {
      cubes[i].addEventListener('click', function(evt) {
        var cube = evt.currentTarget;
        cube.setAttribute('material', cube.getAttribute('material') ? 'normal' : 'highlight');
        var href = cube.getAttribute('href');
        if (href) {
          window.top.postMessage({type: 'navigate', data: {url: href}}, '*');
        }
      });
    }
  </script>
</body>
</html>
