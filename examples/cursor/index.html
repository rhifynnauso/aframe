<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cursor</title>
    <meta name="description" content="Cursor â€” vr-markup">
    <link rel="stylesheet" type="text/css" href="../../style/vr-markup.css">
    <link rel="stylesheet" type="text/css" href="../_style/main.css">
    <script src="../../build/vr-markup.js"></script>
  </head>
  <body>
    <vr-assets>
      <vr-mixin id="cube" geometry="primitive: box"></vr-mixin>
      <vr-mixin id="cube-hovered" material="color: pink"></vr-mixin>
      <vr-mixin id="red" material="color: red"></vr-mixin>
      <vr-mixin id="green" material="color: green"></vr-mixin>
      <vr-mixin id="blue" material="color: blue"></vr-mixin>
      <vr-mixin id="sphere" geometry="primitive: sphere"></vr-mixin>
    </vr-assets>

    <vr-scene stats="true">
      <vr-object position="-3 0 20" camera="fov: 45" controls="mouselook: true; locomotion: true">
        <vr-object position="0 0 -5" geometry="primitive: ring; outerRadius: 0.30; innerRadius: 0.20;" material="color: red" cursor="maxDistance: 30"></vr-object>
      </vr-object>

      <vr-object position="-10 0 0" rotation="0 0 0">
        <vr-object mixin="cube red">
          <vr-animation begin="click" attribute="position" from="0 0 0" to="0 0 -10" dur="2000" fill="both"></vr-animation>
        </vr-object>
      </vr-object>

      <vr-object position="0 0 0" rotation="0 0 0">
        <vr-object mixin="cube green">
          <vr-animation begin="click" attribute="rotation" to="0 360 0" easing="linear" dur="2000"></vr-animation>
        </vr-object>
      </vr-object>

      <vr-object position="10 0 0" rotation="0 45 0">
        <vr-object mixin="cube blue">
          <vr-animation begin="click" fill="forward" repeat="1" direction="alternate" attribute="position" from="0 0 0" to="15 0 0" dur="2000"></vr-animation>
        </vr-object>
      </vr-object>
    </vr-scene>

    <script>
      (function () {
        // If you want to respond to mouse events, this is how. Otherwise,
        // if you just want a working cursor, you don't need any of this.
        var cubes = document.querySelectorAll('vr-object[mixin=cube]');
        var i;
        for (i = 0; i < cubes.length; ++i) {
          cubes[i].addEventListener('click', function () {
            console.log('click', this);
            var href = this.getAttribute('href');
            if (href) {
              window.top.postMessage({type: 'navigate', data: {url: href}}, '*');
            }
          })
        }
      })();
    </script>
  </body>
</html>
