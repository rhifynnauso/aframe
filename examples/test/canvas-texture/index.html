<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Canvas Texture</title>
    <meta name="description" content="Canvas Texture - A-Frame">
    <script src="../../../dist/aframe.js"></script>
  </head>
  <body>
    <script type="text/javascript">
      AFRAME.registerComponent('update-canvas', {
        schema: {default: ''},

        init: function () {
          this.canvas = document.getElementById(this.data);
          this.ctx = this.canvas.getContext('2d');
          this.ctx.fillStyle = "rgb(0,0,0)";
          this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
        },

        tick: function (t) {
          let hue = t / 10;
          this.ctx.fillStyle = 'hsl(' + hue + ', 50%, 80%)';
          this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);

          hue = t / 15;
          this.ctx.fillStyle = 'hsl(' + hue + ', 50%, 60%)';
          var x = this.canvas.width / 10;
          var y = this.canvas.height / 10;
          this.ctx.fillRect(x, y, this.canvas.width - x * 2, this.canvas.height - y * 2)

          hue = t / 20;
          this.ctx.fillStyle = 'hsl(' + hue + ', 50%, 40%)';
          x = this.canvas.width / 5;
          y = this.canvas.height / 5;
          this.ctx.fillRect(x, y, this.canvas.width - x * 2, this.canvas.height - y * 2);
        }
      });
    </script>
    <a-scene stats>
      <a-assets>
        <canvas id="helloworldCanvas" crossOrigin="anonymous"></canvas>
      </a-assets>
      
      <a-entity camera look-controls></a-entity>
      <a-entity material="shader: flat; src: #helloworldCanvas"
                geometry="primitive: plane; width: 160; height: 90;"
                position="0 60 -250"
                rotation="0 35 0"
                update-canvas="helloworldCanvas">
      </a-entity>
    </a-scene>
  </body>
</html>
